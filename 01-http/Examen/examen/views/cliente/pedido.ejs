<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src='/socket.io.js' type='text/javascript'></script>
    <title>Document</title>


</head>
<body>

<div>
    <legend>Estado: <%= pedidoNuevo.estadoPedido %></legend>
</div>
<div>

</div>
<div>
    <form action="/api/pedido/editar">
        <div class="col-md-6">
            <label for="nombreUsr">Nombre:</label>
            <input type="text" class="form-control" id="nombreUsr" name="nombreUsuario">


            <label for="direccion">Direccion:</label>
            <input type="text" class="form-control" id="direccion" name="direccionUsuario">


            <label for="telefono">Teléfono:</label>
            <input type="text" class="form-control" id="telefono" name="telefonoUsuario">


        </div>
        <div class="col-md-6">
            <div class="col-md-12">
                <label for="ciUsr">CI Usuario:</label>
                <input type="text" class="form-control" id="ciUsr" name="ciUsuario">
            </div>
            <div class="col-md-6">
                <label for="totalSin">Total sin impuestos:</label>
                <input type="text" class="form-control" id="totalSin" name="totalSinImpuesto">
            </div>
            <div class="col-md-6">
                <label for="totalCon">Total con impuestos:</label>
                <input type="password" class="form-control" id="totalCon" name="totalConImpuesto">
            </div>
            <div class="col-md-12 ">
                <button class="btn btn-success pull-right">COMPRAR</button>
            </div>


        </div>

    </form>
</div>
<div style="color:white; size:40px">hola</div>
<br>
<div class="panel panel-info">
    <div class="panel-heading">
        SELECCION ARTÍCULOS
    </div>
</div>
<input id="lista" type="text" value="<%= listaLibros %>">
<button id="titulo">titulo</button>
<script>
    const titulo = document.getElementById('lista')
    titulo.onclick=() =>{

        titulo.length
      
        alert("bien")

    }
</script>
<div class="panel-body">
    <div class="col-md-6">
        <legend>Articulos dispnibles</legend>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio</th>
                <th>Opciones</th>
            </tr>
            </thead>
            <tbody>

            <% listaLibros.forEach((libro)=>{ %>
                <tr>
                    <form action="/api/plato/editar" method="post">

                        <td><input id="nombreId" type="text" class="form-control" name="nombre"
                                   value="<%= libro.ICBN %>"></td>
                        <td><input id="descripcionId" type="text" class="form-control" name="descripcion"
                                   value="<%= libro.nombre %>"></td>
                        <td><input id="precioId" type="text" class="form-control" name="precio"
                                   value="<%= libro.numeroPaginas %>">
                            <input id="Id" type="hidden" class="form-control" name="id" value="<%= libro.id %>">
                        </td>

                        <td>
                            <button class="btn btn-info">Editar</button>
                        </td>
                    </form>
                    <td>
                        <form action="/api/plato/eliminar" method="post">
                            <input id="Id" type="hidden" class="form-control" name="id" value="<%= libro.id %>">
                            <button class="btn btn-danger">Eliminar</button>
                        </form>
                    </td>

                </tr>
            <% }) %>

            </tbody>
        </table>
    </div>
    <div class="col-md-6">
        <legend>Articulos seleccionados</legend>
    </div>

</div>
</div>


<script>
    function peticionJugar() {
        const letraInput = document.getElementById("texto")
        let xe = document.getElementsByClassName("e")
        const nombreMetodo = 'adiviname';
        const datos = {
            letra: letraInput.value
        };
        console.log("LEGUEEEE2")
        const correcto = arregloLentes.some(
            value => {
                return letraInput.value == value
            }
        )
        console.log("correcto", correcto)
        if (correcto) {

            var elemtnos = document.getElementsByClassName(letraInput.value)
            elemtnos[0].style.color = "black"
            if (elemtnos.length > 1) {
                // debugger
                elemtnos[1].style.color = "black"

            }


            //x[Symbol.iterator].style.fontcolor("black")


        } else {
            alert("LETRA INCORRECTA !!!!!!!! :(")
        }
        console.log("lslslsl")
        socket.emit(
            nombreMetodo,
            datos,
            (respuesta) => {//callback
                console.log(respuesta);
            }
        )
    }

    function verLetra() {

    }
</script>
<script>
    const url = 'http://localhost:3010/websockets';
    const socket = io(url);
    console.log('ya mismo nos conectamos :v');
    let arregloLentes = ["l", "e", "n", "t", "e", "s"]

    socket.on(
        'connect', //nombre del evento
        () => {
            console.log('estamos conectados!'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
            /*socket.disconnect();
            setTimeout(
                ()=>{
                    socket.connect();
                },3000
            )*/
        }
    );
    socket.on(
        'disconnect', //nombre del evento, hay muchos eventos como el reconnect, etc
        () => {
            console.log('no estamos conectados alv =(!'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
        }
    );
    socket.on(
        'hola', //nombre del evento, hay muchos eventos como el reconnect, etc
        (data) => {
            console.log("kdkkdk")
            const letrita = data.letra.toLowerCase()
            const correcto = arregloLentes.some(
                value => {
                    return letrita == value
                }
            )
            if (correcto) {
                console.log("LEGUEEEE")
                var elemtnos = document.getElementsByClassName(letrita)
                elemtnos[0].style.color = "black"
                elemtnos[1].style.color = "black"


                //x[Symbol.iterator].style.fontcolor("black")


            } else {
                console.log("ldldldl")
            }
            // parrafo.innerHTML = contenidoHTML
            // anadirEtiqueta(nombreContenedor, parrafo)
            //
            // console.log('nos saludaron'); //toda la logica siempre que el servidor se baja y sube se implementa aqui
        }
    );

</script>
</body>
</html>